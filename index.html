<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShowPublic IP - Find Your Public IP & Domain Information</title>
  <meta name="description" content="ShowPublic IP - Instantly check your public IP address, geolocation, ISP, and domain details." />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />

  <style>
    body {font-family:'Segoe UI',Roboto,Arial,sans-serif;background:#f9fafb;margin:0;color:#111827;}
    header {display:flex;justify-content:space-between;align-items:center;background:#2563eb;color:white;padding:16px 40px;}
    header h1 {display:flex;align-items:center;font-size:22px;margin:0;}
    header h1 img {width:32px;height:32px;margin-right:10px;}
    nav a {color:white;margin-left:24px;text-decoration:none;font-weight:500;}
    nav a:hover {opacity:.8;}
    .container {max-width:900px;margin:40px auto;background:white;border-radius:16px;padding:32px;}
    .tagline {font-size:16px;color:#4b5563;margin-top:4px;margin-bottom:24px;}
    .search-box {display:flex;align-items:center;gap:10px;margin-bottom:24px;}
    .search-box input {flex:1;padding:10px 14px;border-radius:10px;border:1px solid #ccc;font-size:15px;}
    .search-box button {padding:10px 16px;border-radius:10px;border:none;background:#2563eb;color:white;cursor:pointer;font-weight:600;}
    .flag-fav {display:flex;justify-content:flex-end;gap:8px;margin-bottom:16px;}
    .flag-fav img {width:48px;height:48px;border-radius:8px;border:1px solid #e5e7eb;object-fit:contain;}
    .info-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-top:20px;}
    .info-card {background:#f9fafb;border-radius:12px;padding:16px;box-shadow:inset 0 0 0 1px #e5e7eb;}
    .info-card h2 {font-size:14px;color:#6b7280;margin-bottom:4px;text-transform:uppercase;}
    .info-card p {font-size:15px;color:#111827;margin:0;word-wrap:break-word;}
    .map-link {display:inline-block;margin-top:18px;text-decoration:none;color:#2563eb;font-weight:500;}
  </style>
</head>
<body>
  <header>
    <h1><img src="SPLOGORAW.png" alt="logo" /> ShowPublic IP</h1>
    <nav><a href="#download">Download ShowPublic IP Desktop</a></nav>
  </header>

  <div class="container">
    <h2>Find Your Public IP Address & Domain Information</h2>
    <p class="tagline">Instantly detect your IP, geolocation, ISP, and DNS details.</p>

    <div class="flag-fav">
      <img id="flag" alt="flag" />
      <img id="favicon" alt="favicon" />
    </div>

    <div class="search-box">
      <input id="txtSearch" type="text" placeholder="Enter IP or domain..." />
      <button id="btnLookup">Lookup</button>
    </div>

    <div class="info-grid" id="infoGrid"></div>
    <a id="mapsLink" class="map-link" target="_blank">Open in Google Maps</a>
  </div>

  <script>
    const txt = document.getElementById('txtSearch');
    const btn = document.getElementById('btnLookup');
    const infoGrid = document.getElementById('infoGrid');
    const flag = document.getElementById('flag');
    const favicon = document.getElementById('favicon');
    const mapsLink = document.getElementById('mapsLink');

    let latt = '', lont = '';

    function cleanDomain(input){
      if(!input) return '';
      input = input.trim().replace(/^https?:\/\//i,'').replace(/^www\./i,'');
      if(input.includes('/')) input = input.split('/')[0];
      if(input.includes('?')) input = input.split('?')[0];
      if(input.includes('#')) input = input.split('#')[0];
      return input;
    }

    // Resolve domain to IP using Google DNS
    async function resolveDomain(domain){
      try{
        const res = await fetch(`https://dns.google/resolve?name=${domain}&type=A`);
        const data = await res.json();
        if(data.Answer && data.Answer.length > 0){
          return data.Answer[0].data; // return first IP
        }
      }catch{}
      return domain; // fallback
    }

    async function showIPInfo(target){
      infoGrid.innerHTML = `<div class='info-card'><p>Loading data...</p></div>`;
      try{
        let ipOrDomain = cleanDomain(target);

        if(!/^\d+\.\d+\.\d+\.\d+$/.test(ipOrDomain)){
          ipOrDomain = await resolveDomain(ipOrDomain);
        }

        const res = await fetch(`https://ipwho.is/${ipOrDomain}`);
        const data = await res.json();

        if(!data.success){
          infoGrid.innerHTML = `<div class='info-card'><p>Failed to retrieve data: ${data.message || 'Unknown error'}</p></div>`;
          return;
        }

        latt = data.latitude;
        lont = data.longitude;

        const fields = [
          ['Public IP', data.ip],
          ['Domain', target || '-'],
          ['Country', `${data.country} (${data.country_code})`],
          ['Region', data.region],
          ['City', data.city],
          ['Postal', data.postal || '-'],
          ['Latitude', data.latitude],
          ['Longitude', data.longitude],
          ['Timezone', data.timezone_gmt],
          ['ISP', data.connection.isp],
          ['Organization', data.connection.org],
          ['ASN', data.connection.asn]
        ];

        infoGrid.innerHTML = fields.map(([k,v])=>`
          <div class='info-card'>
            <h2>${k}</h2>
            <p>${v || '-'}</p>
          </div>
        `).join('');

        mapsLink.href = `https://www.google.com/maps/search/?api=1&query=${latt},${lont}`;
        const code = data.country_code?.toLowerCase() || '';
        flag.src = code ? `https://flagcdn.com/w80/${code}.png` : '';
        const domainClean = cleanDomain(target);
        if(domainClean) favicon.src = `https://www.google.com/s2/favicons?sz=64&domain=${domainClean}`;

      }catch(e){
        infoGrid.innerHTML = `<div class='info-card'><p>Failed to retrieve data: ${e.message}</p></div>`;
      }
    }

    btn.addEventListener('click', ()=>{ const t = txt.value; if(!t){alert('Enter IP or domain'); return;} showIPInfo(t); });
    txt.addEventListener('keypress', e=>{ if(e.key==='Enter'){ const t = txt.value; if(!t){alert('Enter IP or domain'); return;} showIPInfo(t); } });

    showIPInfo(''); // load own IP info on page load
  </script>
</body>
</html>
