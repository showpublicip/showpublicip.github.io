<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShowPublic IP - Find Your Public IP & Domain Information</title>
  <meta name="description" content="ShowPublic IP - Instantly check your public IP address, geolocation, ISP, and domain details. Download the PC version for Windows 7, 8, 10, or 11." />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <style>
    body {font-family:'Segoe UI',Roboto,Arial,sans-serif;background:#f9fafb;margin:0;color:#111827;}
    header {display:flex;justify-content:space-between;align-items:center;background:#2563eb;color:white;padding:16px 40px;box-shadow:0 2px 10px rgba(0,0,0,0.15);}
    header h1 {display:flex;align-items:center;font-size:22px;margin:0;}
    header h1 img {width:32px;height:32px;margin-right:10px;}
    nav a {color:white;margin-left:24px;text-decoration:none;font-weight:500;transition:opacity .2s;}
    nav a:hover {opacity:.8;}
    .container {max-width:900px;margin:40px auto;background:white;border-radius:16px;box-shadow:0 6px 25px rgba(0,0,0,0.08);padding:32px;}
    .tagline {font-size:16px;color:#4b5563;margin-top:4px;margin-bottom:24px;}
    .search-box {display:flex;align-items:center;gap:10px;margin-bottom:24px;}
    .search-box input {flex:1;padding:10px 14px;border-radius:10px;border:1px solid #ccc;font-size:15px;transition:border-color .2s;}
    .search-box input:focus {outline:none;border-color:#2563eb;}
    .search-box button {padding:10px 16px;border-radius:10px;border:none;background:#2563eb;color:white;cursor:pointer;font-weight:600;transition:background .2s;}
    .search-box button:hover {background:#1d4ed8;}
    .flag-fav {display:flex;justify-content:flex-end;gap:8px;margin-bottom:16px;}
    .flag-fav img {width:48px;height:48px;border-radius:8px;border:1px solid #e5e7eb;object-fit:contain;}
    .info-grid {display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-top:20px;}
    .info-card {background:#f9fafb;border-radius:12px;padding:16px;box-shadow:inset 0 0 0 1px #e5e7eb;transition:background .2s;}
    .info-card:hover {background:#f3f4f6;}
    .info-card h2 {font-size:14px;color:#6b7280;margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px;}
    .info-card p {font-size:15px;color:#111827;margin:0;word-wrap:break-word;}
    .map-link {display:inline-block;margin-top:18px;text-decoration:none;color:#2563eb;font-weight:500;}
    .map-link:hover {text-decoration:underline;}
    footer {text-align:center;padding:20px;margin-top:40px;background:#f3f4f6;color:#6b7280;font-size:14px;}
    .download-btn {background:#10b981;color:white;padding:10px 18px;border-radius:10px;text-decoration:none;font-weight:600;transition:background .2s;}
    .download-btn:hover {background:#059669;}
  </style>
</head>
<body>
  <header>
    <h1><img src="SPLOGORAW.png" alt="logo" /> ShowPublic IP</h1>
    <nav>
      <a href="#download">Download ShowPublic IP Desktop (Portable)</a>
    </nav>
  </header>

  <div class="container">
    <h2>Find Your Public IP Address & Domain Information</h2>
    <p class="tagline">Instantly detect your IP, geolocation, ISP, and DNS details — all in one clean interface.</p>

    <div class="flag-fav">
      <img id="flag" alt="flag" />
      <img id="favicon" alt="favicon" />
    </div>

    <div class="search-box">
      <input id="txtSearch" type="text" placeholder="Enter IP or domain..." />
      <button id="btnLookup">Lookup</button>
    </div>

    <div class="info-grid" id="infoGrid"></div>
    <a id="mapsLink" class="map-link" target="_blank">Open in Google Maps</a>
  </div>

  <section id="download" style="text-align:center; margin-top:50px;">
    <h2>Download ShowPublic IP Desktop (Portable)</h2>
    <p style="color:#4b5563; margin-bottom:20px;">Get the desktop version.</p>
    <a id="downloadBtn" href="#" class="download-btn">⬇ Download .EXE Version</a>
  </section>

  <footer>
    © 2025 ShowPublic IP — Built for professionals who care about network visibility.
  </footer>

  <script>
    const txt = document.getElementById('txtSearch');
    const btn = document.getElementById('btnLookup');
    const infoGrid = document.getElementById('infoGrid');
    const flag = document.getElementById('flag');
    const favicon = document.getElementById('favicon');
    const mapsLink = document.getElementById('mapsLink');
    const downloadBtn = document.getElementById('downloadBtn');

    let latt = '', lont = '';

    function cleanDomainInput(input){
      if(!input) return '';
      input = input.trim();
      input = input.replace(/^https?:\/\//i, '').replace(/^www\./i, '');
      if(input.includes('/')) input = input.split('/')[0];
      if(input.includes('?')) input = input.split('?')[0];
      if(input.includes('#')) input = input.split('#')[0];
      return input;
    }

    function getValue(jsonStr, key){
      try {
        const pattern = new RegExp('"'+key.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')+'"\\s*:\\s*("([^\\"]*)"|(-?\\d+(\\.\\d+)?))','i');
        const m = jsonStr.match(pattern);
        if(m) return decodeUnicode(m[2] || m[3] || '');
      } catch {}
      return '';
    }

    function decodeUnicode(input){
      return input.replace(/\\u([0-9A-Fa-f]{4})/g, (_, g)=>String.fromCharCode(parseInt(g,16)));
    }

    async function showIPInfo(url){
      try {
        const res = await fetch(url);
        if(!res.ok) throw new Error('HTTP '+res.status);
        const json = await res.text();
        renderInfo(json);
        showFlag(json);
        const target = cleanDomainInput(txt.value);
        if(target) showFavicon(target);
      } catch(e) {
        infoGrid.innerHTML = `<div class='info-card'><p>Failed to retrieve data: ${e.message}</p></div>`;
      }
    }

    function renderInfo(json){
      const status = getValue(json, 'status');
      if(status.toLowerCase() !== 'success'){
        infoGrid.innerHTML = `<div class='info-card'><p>Unable to retrieve information from the service.</p></div>`;
        return;
      }

      latt = getValue(json,'lat');
      lont = getValue(json,'lon');

      const fields = [
        ['Public IP', getValue(json,'query')],
        ['Country', `${getValue(json,'country')} (${getValue(json,'countryCode')})`],
        ['Region', `${getValue(json,'regionName')} (${getValue(json,'region')})`],
        ['City', getValue(json,'city')],
        ['Postal', getValue(json,'zip')],
        ['Latitude', getValue(json,'lat')],
        ['Longitude', getValue(json,'lon')],
        ['Timezone', getValue(json,'timezone')],
        ['ISP', getValue(json,'isp')],
        ['Organization', getValue(json,'org')],
        ['ASN', getValue(json,'as')]
      ];

      infoGrid.innerHTML = fields.map(([k,v]) => `
        <div class='info-card'>
          <h2>${k}</h2>
          <p>${v || '-'}</p>
        </div>
      `).join('');

      mapsLink.href = `https://www.google.com/maps/search/?api=1&query=${latt},${lont}`;
    }

    function showFlag(json){
      const code = getValue(json,'countryCode').toLowerCase();
      flag.src = code ? `https://flagcdn.com/w80/${code}.png` : '';
    }

    function showFavicon(target){
      const domain = cleanDomainInput(target);
      favicon.src = domain ? `https://www.google.com/s2/favicons?sz=64&domain=${domain}` : '';
    }

    // Detect Windows version and set proper download link
    function detectWindowsVersion(){
      const ua = navigator.userAgent;
      let version = '';
      if(ua.includes('Windows NT 10.0')) version = '10';
      else if(ua.includes('Windows NT 11.0')) version = '11';
      else if(ua.includes('Windows NT 6.3')) version = '8.1';
      else if(ua.includes('Windows NT 6.2')) version = '8';
      else if(ua.includes('Windows NT 6.1')) version = '7';
      else version = 'unknown';

      let link = 'dl/ShowPublic%20IP.exe';
      if(version === '7') link = 'dl/w7/ShowPublic%20IP.exe';
      else if(['8','8.1','10','11'].includes(version)) link = 'dl/wnew/ShowPublic%20IP.exe';
      else link = 'dl/ShowPublic%20IP.exe';

      downloadBtn.href = link;
      downloadBtn.textContent = `⬇ Download for Windows`;
    }

    btn.addEventListener('click', ()=>{
      const target = cleanDomainInput(txt.value);
      if(!target) { alert('Enter the IP or domain you want to search for.'); return; }
      showIPInfo(`http://ip-api.com/json/${target}`);
    });

    txt.addEventListener('keypress', e=>{
      if(e.key === 'Enter') {
        const target = cleanDomainInput(txt.value);
        if(!target) { alert('Enter the IP or domain you want to search for.'); return; }
        showIPInfo(`http://ip-api.com/json/${target}`);
      }
    });

    // Run on load
    detectWindowsVersion();
    showIPInfo('http://ip-api.com/json/');
  </script>
</body>
</html>
